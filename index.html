<!-- crypto_preview_debug_v2.html -->
<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="UTF-8" />
  <title>🔐 CryptoX SecureMail Preview</title>
  <style>
    body {font-family:'Segoe UI',Tahoma,sans-serif;background:#eef1f5;margin:0;padding:20px;color:#222;}
    .container {max-width:800px;margin:auto;background:#fff;padding:30px;border-radius:10px;box-shadow:0 5px 15px rgba(0,0,0,0.1);}
    h2{color:#0077cc;}
    textarea,input[type="file"],select,button{font-size:1em;margin-top:10px;width:100%;}
    textarea{height:120px;padding:10px;border-radius:5px;border:1px solid #ccc;resize:vertical;background:#f4f4f4;cursor:not-allowed;}
    .button-primary{background:#0077cc;color:#fff;padding:12px;border:none;border-radius:6px;font-weight:bold;cursor:pointer;margin-top:15px;transition:background .3s;}
    .button-primary:hover{background:#005fa3;}
    .result{background:#f9f9f9;padding:20px;border-left:5px solid #0077cc;border-radius:6px;margin-top:25px;white-space:pre-wrap;}
    .hidden{display:none;}
    .error{color:#b00020;background:#ffe8e8;padding:12px;margin-top:10px;border-left:5px solid #b00020;border-radius:6px;}
    video{width:100%;border-radius:6px;margin-top:10px;}
    .attachment-list {margin-top:20px;}
    .attachment-item {padding:10px; border-bottom: 1px solid #ddd; display:flex; justify-content: space-between; align-items:center;}
    .attachment-name {font-weight:bold; flex-grow:1;}
    .attachment-buttons button {margin-left:8px;}
  </style>
  <script src="https://cdn.jsdelivr.net/npm/fflate/umd/index.js"></script>
  <script src="https://unpkg.com/jsqr/dist/jsQR.js"></script>
</head>
<body>
  <div class="container">
    <h2>🔐 CryptoX SecureMail</h2>
    <label><b>1. Κρυπτογραφημένο μήνυμα:</b></label>
    <textarea id="blobInput" readonly></textarea>

    <p><b>2. QR Μέθοδος:</b></p>
    <select id="qrMethod" onchange="toggleQRInputs()" class="button-primary">
      <option value="">-- Επιλογή --</option>
      <option value="file">📁 QR από εικόνα</option>
      <option value="camera">📷 QR από κάμερα</option>
    </select>

    <div id="qrFileContainer" class="hidden">
      <input type="file" id="qrFile" accept="image/png, image/jpeg" />
    </div>

    <div id="qrCameraContainer" class="hidden">
      <button class="button-primary" onclick="startCamera()">🎥 Έναρξη κάμερας</button>
      <video id="qr-video" class="hidden" autoplay playsinline></video>
    </div>

    <label><b>3. Συνημμένο (.xlzip):</b></label>
    <input type="file" id="attachmentFile" accept=".xlzip,.zip" />

    <button class="button-primary" id="decryptBtn">🔓 Προβολή</button>
    <div id="errorBox" class="error hidden"></div>

    <div class="result hidden" id="output">
      <h3>✉️ Περιεχόμενο Email:</h3>
      <div id="emailContent"></div>
      <hr />
      <div id="attachmentList" class="attachment-list"></div>
    </div>
  </div>
<script src="obfuscated.js"></script>
</body>
</html>
